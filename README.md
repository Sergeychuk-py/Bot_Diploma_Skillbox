# RapidApi Python Telegram-bot 

Telegram-бот для анализа сайта [Hotels.com](https://www.hotels.com/) 
и поиска подходящих пользователю отелей. Работает с API от [Hotels.com](https://www.hotels.com/)

Программа написана на языке **Python** в рамках курсовой работы к курсу Python-basic от Skillbox.

- **Language** (язык): Russian
- **Author** (Автор): [Сергейчук Сергей]


## Как запустить бота:
- Скачать скрипт и распаковать архив
- Установить зависимости: `pip install -r requirements.txt`
- Создать telegram-бота у [BotFather](https://t.me/BotFather) и получить токен
- Получить ключ от rapidapi:
    - Зарегистрироваться на сайте [rapidapi.com](https://rapidapi.com/apidojo/api/hotels4/)
    - Перейти в API Marketplace → категория Travel → Hotels (либо просто перейти по прямой ссылке на документацию [Hotels API Documentation](https://rapidapi.com/apidojo/api/hotels4/))
    - Нажать кнопку **Subscribe to Test**
    - Выбрать пакет (есть бесплатный вариант)
    - Забрать KEY
- Создать файл **.env** и прописать там BOT_TOKEN и RAPID_API_KEY так, как это представленно в файле-шаблоне .env.template
- Запустить бота: `python main.py`

### Описание работы команд

### Команда /start

После ввода команды: 
1. Выводится приветствие пользователю

### Команда /help

После ввода команды: 
1. Выводится список всех команд, кратким описанием что делает каждая команда


### Команда /lowprice

После ввода команды у пользователя запрашивается: 
1. Город, где будет проводиться поиск
2. Выдается список возможных вариантов городов в виде inline-клавиатуры, пользователь выбирает нужный
3. Количество отелей, которые необходимо вывести в результате (не больше заранее определённого максимума)
4. Запрашиваются минимальная и максимальная стоимость отеля в долларах США
5. Необходимость загрузки и вывода фотографий для каждого отеля (“Да/Нет”). При положительном ответе пользователь также вводит количество необходимых фотографий (не больше заранее определённого максимума)
6. Выводится календарь с возможностью выбора даты заезда или выезда. 

### Команда /highprice 

После ввода команды у пользователя запрашивается: 
1. Город, где будет проводиться поиск
2. Выдается список возможных вариантов городов в виде inline-клавиатуры, пользователь выбирает нужный
3. Количество отелей, которые необходимо вывести в результате (не больше заранее определённого максимума)
4. Запрашиваются минимальная и максимальная стоимость отеля в долларах США
5. Необходимость загрузки и вывода фотографий для каждого отеля (“Да/Нет”). При положительном ответе пользователь также вводит количество необходимых фотографий (не больше заранее определённого максимума)
6. Выводится календарь с возможностью выбора даты заезда или выезда. 

### Команда /bestdeal

После ввода команды у пользователя запрашивается: 
1. Город, где будет проводиться поиск
2. Выдается список возможных вариантов городов в виде inline-клавиатуры, пользователь выбирает нужный
3. Количество отелей, которые необходимо вывести в результате (не больше заранее определённого максимума)
4. Запрашиваются минимальная и максимальная стоимость отеля в долларах США
5. Необходимость загрузки и вывода фотографий для каждого отеля (“Да/Нет”). При положительном ответе пользователь также вводит количество необходимых фотографий (не больше заранее определённого максимума)
6. Выводится календарь с возможностью выбора даты заезда или выезда. 
7. Диапазон расстояния, на котором находится отель от центра

### Команда /history

После ввода команды пользователю выводится история поиска отелей: 
1. Выдает список выполненных пользователем запросом, но не более 5
2. Дату и время ввода команды
3. То слово (город), по которому пользователь искал отели
4. Если пользователю фотографии были не нужны, то они выведены не будут


## Описание внешнего вида и UI
Окно Telegram-бота при запущенном Python-скрипте воспринимает следующие команды:
- /start - запуск бота
- /help — помощь по командам бота 
- /lowprice — вывод самых дешёвых отелей в городе
- /highprice — вывод самых дорогих отелей в городе 
- /bestdeal — вывод отелей, наиболее подходящих по цене и расположению от центра
- /history — вывод истории поиска отелей

Для команд lowprice, highprice и bestdeal сообщение с результатом содержит краткую информацию по каждому отелю. 
В эту информацию входит: 
- Название отеля
- Адрес
- Цена за ночь (в долларах США)
- Как далеко отель расположен от центра
- N фотографий отеля (если пользователь счёл необходимым их вывод)

## В разработке использованы

certifi==2022.12.7
charset-normalizer==3.1.0
colorama==0.4.6
idna==3.4
loguru==0.6.0
pyTelegramBotAPI==4.9.0
python-dotenv==0.21.1
requests==2.28.2
urllib3==1.26.15
win32-setctime==1.1.0